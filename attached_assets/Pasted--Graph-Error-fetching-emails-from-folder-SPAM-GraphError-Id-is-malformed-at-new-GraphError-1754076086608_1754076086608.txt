server console:



❌ [Graph] Error fetching emails from folder SPAM: GraphError: Id is malformed.
    at new GraphError (/opt/render/project/src/node_modules/@microsoft/microsoft-graph-client/lib/src/GraphError.js:34:28)
    at GraphErrorHandler.constructErrorFromResponse (/opt/render/project/src/node_modules/@microsoft/microsoft-graph-client/lib/src/GraphErrorHandler.js:63:22)
    at Function.<anonymous> (/opt/render/project/src/node_modules/@microsoft/microsoft-graph-client/lib/src/GraphErrorHandler.js:91:48)
📫 [Graph] Total: 203 emails from Microsoft Graph in 3902ms
    at step (/opt/render/project/src/node_modules/tslib/tslib.js:196:27)
    at Object.next (/opt/render/project/src/node_modules/tslib/tslib.js:177:57)
    at /opt/render/project/src/node_modules/tslib/tslib.js:170:75
    at new Promise (<anonymous>)
    at Object.__awaiter (/opt/render/project/src/node_modules/tslib/tslib.js:166:16)
    at GraphErrorHandler.getError (/opt/render/project/src/node_modules/@microsoft/microsoft-graph-client/lib/src/GraphErrorHandler.js:87:24)
    at GraphRequest.<anonymous> (/opt/render/project/src/node_modules/@microsoft/microsoft-graph-client/lib/src/GraphRequest.js:315:84) {
  statusCode: 400,
  code: 'ErrorInvalidIdMalformed',
  requestId: null,
  date: 2025-08-01T19:19:56.376Z,
  body: '{"code":"ErrorInvalidIdMalformed","message":"Id is malformed."}',
  headers: Headers {
    'cache-control': 'private',
    'transfer-encoding': 'chunked',
    'content-type': 'application/json; odata.metadata=minimal; odata.streaming=true; IEEE754Compatible=false; charset=utf-8',
    'content-encoding': 'gzip',
    'strict-transport-security': 'max-age=31536000',
    'request-id': '418bd28b-1269-4274-96a3-2e93666b807d',
    'client-request-id': 'a626c8e5-d055-deeb-8b32-4bf17e9ff38c',
    'x-ms-ags-diagnostic': '{"ServerInfo":{"DataCenter":"Germany West Central","Slice":"E","Ring":"4","ScaleUnit":"002","RoleInstance":"FR3PEPF00000163"}}',
    date: 'Fri, 01 Aug 2025 19:19:55 GMT'
  }
📧 [Scan] Fetched 203 emails from microsoft spam folder in 3903ms
}
📊 [Progress] Set totalScanned to 203, currentProgress to 0
🔄 [Scan] Starting individual email processing...
📨 [Email 1/203] Processing: "Get Your App Ready for Real Users" from contact@mail.replit.com
📊 [Progress] Updated currentProgress to 1/203
📝 [Email 1/203] Text extracted in 5ms
🧠 [AI] Starting classification for email: "Get Your App Ready for Real Users" from contact@mail.replit.com
📤 [AI] Sending request to OpenRouter...
🔄 [OpenRouter] Starting API call at 2025-08-01T19:19:56.388Z
📡 [OpenRouter] API response received in 1024ms
🚦 [OpenRouter] Rate limiting activated - adding 5s delay between requests
⏳ [OpenRouter] Rate limited, retrying in 5s (attempt 1/3)
🔄 [OpenRouter] Starting API call at 2025-08-01T19:20:02.413Z
📡 [OpenRouter] API response received in 904ms
⏳ [OpenRouter] Rate limited, retrying in 10s (attempt 2/3)
🔄 [OpenRouter] Starting API call at 2025-08-01T19:20:13.320Z
🚀 [Scan] Starting email scan for scanId: 15 with provider: microsoft at 2025-08-01T19:20:14.055Z
📫 [Graph] Starting to fetch emails from folders: INBOX, SPAM
7:20:14 PM [express] POST /api/scan/2 200 in 66ms :: {"scanId":15}
📊 [API] Returning scan data - currentProgress: 0, totalScanned: 0, status: pending
7:20:14 PM [express] GET /api/scan/15 200 in 17ms :: {"scan":{"id":15,"userId":2,"totalScanned":0,"d…
📡 [OpenRouter] API response received in 1101ms
⏳ [OpenRouter] Rate limited, retrying in 20s (attempt 3/3)
📊 [API] Returning scan data - currentProgress: 0, totalScanned: 0, status: pending
7:20:15 PM [express] GET /api/scan/15 304 in 10ms :: {"scan":{"id":15,"userId":2,"totalScanned":0,"d…
📊 [API] Returning scan data - currentProgress: 0, totalScanned: 0, status: pending
7:20:16 PM [express] GET /api/scan/15 304 in 11ms :: {"scan":{"id":15,"userId":2,"totalScanned":0,"d…
📫 [Graph] Fetched 203 emails from folder INBOX
❌ [Graph] Error fetching emails from folder SPAM: GraphError: Id is malformed.
    at new GraphError (/opt/render/project/src/node_modules/@microsoft/microsoft-graph-client/lib/src/GraphError.js:34:28)
    at GraphErrorHandler.constructErrorFromResponse (/opt/render/project/src/node_modules/@microsoft/microsoft-graph-client/lib/src/GraphErrorHandler.js:63:22)
    at Function.<anonymous> (/opt/render/project/src/node_modules/@microsoft/microsoft-graph-client/lib/src/GraphErrorHandler.js:91:48)
    at step (/opt/render/project/src/node_modules/tslib/tslib.js:196:27)
    at Object.next (/opt/render/project/src/node_modules/tslib/tslib.js:177:57)
    at /opt/render/project/src/node_modules/tslib/tslib.js:170:75
    at new Promise (<anonymous>)
    at Object.__awaiter (/opt/render/project/src/node_modules/tslib/tslib.js:166:16)
    at GraphErrorHandler.getError (/opt/render/project/src/node_modules/@microsoft/microsoft-graph-client/lib/src/GraphErrorHandler.js:87:24)
    at GraphRequest.<anonymous> (/opt/render/project/src/node_modules/@microsoft/microsoft-graph-client/lib/src/GraphRequest.js:315:84) {
  statusCode: 400,
  code: 'ErrorInvalidIdMalformed',
  requestId: null,
  date: 2025-08-01T19:20:17.233Z,
  body: '{"code":"ErrorInvalidIdMalformed","message":"Id is malformed."}',
  headers: Headers {
    'cache-control': 'private',
    'transfer-encoding': 'chunked',
    'content-type': 'application/json; odata.metadata=minimal; odata.streaming=true; IEEE754Compatible=false; charset=utf-8',
    'content-encoding': 'gzip',
    'strict-transport-security': 'max-age=31536000',
    'request-id': '577551eb-45c0-4125-9ad9-e9efaefce13e',
    'client-request-id': 'c85d3e18-ced5-99f8-f32b-14b1fca57b62',
    'x-ms-ags-diagnostic': '{"ServerInfo":{"DataCenter":"Germany West Central","Slice":"E","Ring":"4","ScaleUnit":"002","RoleInstance":"FR3PEPF00000163"}}',
    date: 'Fri, 01 Aug 2025 19:20:17 GMT'
  }
}
📫 [Graph] Total: 203 emails from Microsoft Graph in 3178ms
📧 [Scan] Fetched 203 emails from microsoft spam folder in 3179ms
📊 [Progress] Set totalScanned to 203, currentProgress to 0
🔄 [Scan] Starting individual email processing...
📨 [Email 1/203] Processing: "Get Your App Ready for Real Users" from contact@mail.replit.com
📊 [Progress] Updated currentProgress to 1/203
📝 [Email 1/203] Text extracted in 6ms
🧠 [AI] Starting classification for email: "Get Your App Ready for Real Users" from contact@mail.replit.com
📤 [AI] Sending request to OpenRouter...
⏱️ [OpenRouter] Rate limit mode active, waiting 2s...
📊 [API] Returning scan data - currentProgress: 1, totalScanned: 203, status: processing
7:20:17 PM [express] GET /api/scan/15 200 in 11ms :: {"scan":{"id":15,"userId":2,"totalScanned":203,…
🔄 [OpenRouter] Starting API call at 2025-08-01T19:20:18.321Z
📊 [API] Returning scan data - currentProgress: 1, totalScanned: 203, status: processing
7:20:18 PM [express] GET /api/scan/15 304 in 11ms :: {"scan":{"id":15,"userId":2,"totalScanned":203,…
📡 [OpenRouter] API response received in 1996ms
⏳ [OpenRouter] Rate limited, retrying in 5s (attempt 1/3)
📊 [API] Returning scan data - currentProgress: 1, totalScanned: 203, status: processing
7:20:19 PM [express] GET /api/scan/15 304 in 11ms :: {"scan":{"id":15,"userId":2,"totalScanned":203,…
📊 [API] Returning scan data - currentProgress: 1, totalScanned: 203, status: processing
7:20:20 PM [express] GET /api/scan/15 304 in 13ms :: {"scan":{"id":15,"userId":2,"totalScanned":203,…
📊 [API] Returning scan data - currentProgress: 1, totalScanned: 203, status: processing
7:20:21 PM [express] GET /api/scan/15 304 in 11ms :: {"scan":{"id":15,"userId":2,"totalScanned":203,…
📊 [API] Returning scan data - currentProgress: 1, totalScanned: 203, status: processing
7:20:22 PM [express] GET /api/scan/15 304 in 12ms :: {"scan":{"id":15,"userId":2,"totalScanned":203,…
📊 [API] Returning scan data - currentProgress: 1, totalScanned: 203, status: processing
7:20:23 PM [express] GET /api/scan/15 304 in 12ms :: {"scan":{"id":15,"userId":2,"totalScanned":203,…
🔄 [OpenRouter] Starting API call at 2025-08-01T19:20:24.243Z
📊 [API] Returning scan data - currentProgress: 1, totalScanned: 203, status: processing
7:20:25 PM [express] GET /api/scan/15 304 in 10ms :: {"scan":{"id":15,"userId":2,"totalScanned":203,…
📡 [OpenRouter] API response received in 1173ms
⏳ [OpenRouter] Rate limited, retrying in 10s (attempt 2/3)
📊 [API] Returning scan data - currentProgress: 1, totalScanned: 203, status: processing
7:20:26 PM [express] GET /api/scan/15 304 in 11ms :: {"scan":{"id":15,"userId":2,"totalScanned":203,…
📊 [API] Returning scan data - currentProgress: 1, totalScanned: 203, status: processing
7:20:27 PM [express] GET /api/scan/15 304 in 11ms :: {"scan":{"id":15,"userId":2,"totalScanned":203,…
📊 [API] Returning scan data - currentProgress: 1, totalScanned: 203, status: processing
7:20:28 PM [express] GET /api/scan/15 304 in 11ms :: {"scan":{"id":15,"userId":2,"totalScanned":203,…
📊 [API] Returning scan data - currentProgress: 1, totalScanned: 203, status: processing
7:20:29 PM [express] GET /api/scan/15 304 in 9ms :: {"scan":{"id":15,"userId":2,"totalScanned":203,"…
📊 [API] Returning scan data - currentProgress: 1, totalScanned: 203, status: processing
7:20:31 PM [express] GET /api/scan/15 304 in 11ms :: {"scan":{"id":15,"userId":2,"totalScanned":203,…
📊 [API] Returning scan data - currentProgress: 1, totalScanned: 203, status: processing
7:20:32 PM [express] GET /api/scan/15 304 in 12ms :: {"scan":{"id":15,"userId":2,"totalScanned":203,…
📊 [API] Returning scan data - currentProgress: 1, totalScanned: 203, status: processing
7:20:33 PM [express] GET /api/scan/15 304 in 18ms :: {"scan":{"id":15,"userId":2,"totalScanned":203,…
📊 [API] Returning scan data - currentProgress: 1, totalScanned: 203, status: processing
7:20:34 PM [express] GET /api/scan/15 304 in 12ms :: {"scan":{"id":15,"userId":2,"totalScanned":203,…
🔄 [OpenRouter] Starting API call at 2025-08-01T19:20:34.422Z
📡 [OpenRouter] API response received in 915ms
❌ [OpenRouter] API error: 429 Too Many Requests
❌ [AI] Error classifying email after 38950ms: Error: OpenRouter API error: 429 Too Many Requests
    at callOpenRouter (file:///opt/render/project/src/dist/index.js:799:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async OpenAIClassifierService.classifyEmail (file:///opt/render/project/src/dist/index.js:858:24)
    at async processEmailScan (file:///opt/render/project/src/dist/index.js:1948:26)
❌ [Email 1/203] AI Classification failed after 38951ms: Error: Failed to classify email: OpenRouter API error: 429 Too Many Requests
    at OpenAIClassifierService.classifyEmail (file:///opt/render/project/src/dist/index.js:898:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async processEmailScan (file:///opt/render/project/src/dist/index.js:1948:26)
🔄 [Email 1/203] Using fallback classification: AI error
🔗 [Email 1/203] Found 1 unsubscribe links in 3ms
💾 [Email 1/203] Stored in database (error) in 52ms
✅ [Email 1/203] Completed in 39012ms total
📨 [Email 2/203] Processing: "Get Your App Ready for Real Users" from contact@mail.replit.com
📊 [Progress] Updated currentProgress to 2/203
📝 [Email 2/203] Text extracted in 6ms
🧠 [AI] Starting classification for email: "Get Your App Ready for Real Users" from contact@mail.replit.com
📤 [AI] Sending request to OpenRouter...
⏱️ [OpenRouter] Rate limit mode active, waiting 5s...
⏱️ [OpenRouter] Rate limit mode active, waiting 5s...
📊 [API] Returning scan data - currentProgress: 1, totalScanned: 203, status: processing
7:20:35 PM [express] GET /api/scan/15 304 in 12ms :: {"scan":{"id":15,"userId":2,"totalScanned":203,…
📊 [API] Returning scan data - currentProgress: 1, totalScanned: 203, status: processing
7:20:36 PM [express] GET /api/scan/15 304 in 11ms :: {"scan":{"id":15,"userId":2,"totalScanned":203,…
📊 [API] Returning scan data - currentProgress: 1, totalScanned: 203, status: processing
7:20:37 PM [express] GET /api/scan/15 304 in 10ms :: {"scan":{"id":15,"userId":2,"totalScanned":203,…
📊 [API] Returning scan data - currentProgress: 1, totalScanned: 203, status: processing
7:20:38 PM [express] GET /api/scan/15 304 in 10ms :: {"scan":{"id":15,"userId":2,"totalScanned":203,…
🔄 [OpenRouter] Starting API call at 2025-08-01T19:20:39.423Z
🔄 [OpenRouter] Starting API call at 2025-08-01T19:20:39.426Z
📊 [API] Returning scan data - currentProgress: 1, totalScanned: 203, status: processing
7:20:39 PM [express] GET /api/scan/15 304 in 19ms :: {"scan":{"id":15,"userId":2,"totalScanned":203,…
📡 [OpenRouter] API response received in 4921ms
⏳ [OpenRouter] Rate limited, retrying in 5s (attempt 1/3)
📡 [OpenRouter] API response received in 4977ms
⏳ [OpenRouter] Rate limited, retrying in 20s (attempt 3/3)
📊 [API] Returning scan data - currentProgress: 1, totalScanned: 203, status: processing
7:20:41 PM [express] GET /api/scan/15 304 in 10ms :: {"scan":{"id":15,"userId":2,"totalScanned":203,…
📊 [API] Returning scan data - currentProgress: 1, totalScanned: 203, status: processing
7:20:42 PM [express] GET /api/scan/15 304 in 11ms :: {"scan":{"id":15,"userId":2,"totalScanned":203,…
📊 [API] Returning scan data - currentProgress: 1, totalScanned: 203, status: processing
7:20:43 PM [express] GET /api/scan/15 304 in 10ms :: {"scan":{"id":15,"userId":2,"totalScanned":203,…
📊 [API] Returning scan data - currentProgress: 1, totalScanned: 203, status: processing
7:20:44 PM [express] GET /api/scan/15 304 in 11ms :: {"scan":{"id":15,"userId":2,"totalScanned":203,…
🔄 [OpenRouter] Starting API call at 2025-08-01T19:20:45.323Z
📊 [API] Returning scan data - currentProgress: 1, totalScanned: 203, status: processing
7:20:45 PM [express] GET /api/scan/15 304 in 60ms :: {"scan":{"id":15,"userId":2,"totalScanned":203,…
📡 [OpenRouter] API response received in 939ms
⏳ [OpenRouter] Rate limited, retrying in 10s (attempt 2/3)
📊 [API] Returning scan data - currentProgress: 1, totalScanned: 203, status: processing
7:20:47 PM [express] GET /api/scan/15 304 in 11ms :: {"scan":{"id":15,"userId":2,"totalScanned":203,…
📊 [API] Returning scan data - currentProgress: 1, totalScanned: 203, status: processing
7:20:48 PM [express] GET /api/scan/15 304 in 10ms :: {"scan":{"id":15,"userId":2,"totalScanned":203,…
📊 [API] Returning scan data - currentProgress: 1, totalScanned: 203, status: processing
7:20:49 PM [express] GET /api/scan/15 304 in 11ms :: {"scan":{"id":15,"userId":2,"totalScanned":203,…
📊 [API] Returning scan data - currentProgress: 1, totalScanned: 203, status: processing
7:20:50 PM [express] GET /api/scan/15 304 in 12ms :: {"scan":{"id":15,"userId":2,"totalScanned":203,…
📊 [API] Returning scan data - currentProgress: 1, totalScanned: 203, status: processing
7:20:51 PM [express] GET /api/scan/15 304 in 11ms :: {"scan":{"id":15,"userId":2,"totalScanned":203,…
📊 [API] Returning scan data - currentProgress: 1, totalScanned: 203, status: processing
7:20:52 PM [express] GET /api/scan/15 304 in 11ms :: {"scan":{"id":15,"userId":2,"totalScanned":203,…
📊 [API] Returning scan data - currentProgress: 1, totalScanned: 203, status: processing
7:20:54 PM [express] GET /api/scan/15 304 in 10ms :: {"scan":{"id":15,"userId":2,"totalScanned":203,…
📊 [API] Returning scan data - currentProgress: 1, totalScanned: 203, status: processing
7:20:55 PM [express] GET /api/scan/15 304 in 11ms :: {"scan":{"id":15,"userId":2,"totalScanned":203,…
🔄 [OpenRouter] Starting API call at 2025-08-01T19:20:56.263Z
📊 [API] Returning scan data - currentProgress: 1, totalScanned: 203, status: processing
7:20:56 PM [express] GET /api/scan/15 304 in 11ms :: {"scan":{"id":15,"userId":2,"totalScanned":203,…
📡 [OpenRouter] API response received in 1003ms
⏳ [OpenRouter] Rate limited, retrying in 20s (attempt 3/3)
📊 [API] Returning scan data - currentProgress: 1, totalScanned: 203, status: processing
7:20:57 PM [express] GET /api/scan/15 304 in 11ms :: {"scan":{"id":15,"userId":2,"totalScanned":203,…
📊 [API] Returning scan data - currentProgress: 1, totalScanned: 203, status: processing
7:20:58 PM [express] GET /api/scan/15 304 in 10ms :: {"scan":{"id":15,"userId":2,"totalScanned":203,…
📊 [API] Returning scan data - currentProgress: 1, totalScanned: 203, status: processing
7:20:59 PM [express] GET /api/scan/15 304 in 11ms :: {"scan":{"id":15,"userId":2,"totalScanned":203,…
⏱️ [OpenRouter] Rate limit mode active, waiting 1s...
📊 [API] Returning scan data - currentProgress: 1, totalScanned: 203, status: processing
7:21:00 PM [express] GET /api/scan/15 304 in 10ms :: {"scan":{"id":15,"userId":2,"totalScanned":203,…
🔄 [OpenRouter] Starting API call at 2025-08-01T19:21:01.264Z
📊 [API] Returning scan data - currentProgress: 1, totalScanned: 203, status: processing
7:21:01 PM [express] GET /api/scan/15 304 in 11ms :: {"scan":{"id":15,"userId":2,"totalScanned":203,…
📡 [OpenRouter] API response received in 1744ms
❌ [OpenRouter] API error: 429 Too Many Requests
❌ [AI] Error classifying email after 44891ms: Error: OpenRouter API error: 429 Too Many Requests
    at callOpenRouter (file:///opt/render/project/src/dist/index.js:799:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async OpenAIClassifierService.classifyEmail (file:///opt/render/project/src/dist/index.js:858:24)
    at async processEmailScan (file:///opt/render/project/src/dist/index.js:1948:26)
❌ [Email 1/203] AI Classification failed after 44892ms: Error: Failed to classify email: OpenRouter API error: 429 Too Many Requests
    at OpenAIClassifierService.classifyEmail (file:///opt/render/project/src/dist/index.js:898:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
🔄 [Email 1/203] Using fallback classification: AI error
    at async processEmailScan (file:///opt/render/project/src/dist/index.js:1948:26)
🔗 [Email 1/203] Found 1 unsubscribe links in 2ms
💾 [Email 1/203] Stored in database (error) in 13ms
✅ [Email 1/203] Completed in 44913ms total
📨 [Email 2/203] Processing: "Get Your App Ready for Real Users" from contact@mail.replit.com
📊 [Progress] Updated currentProgress to 2/203
📝 [Email 2/203] Text extracted in 7ms
🧠 [AI] Starting classification for email: "Get Your App Ready for Real Users" from contact@mail.replit.com
📤 [AI] Sending request to OpenRouter...
⏱️ [OpenRouter] Rate limit mode active, waiting 5s...
📊 [API] Returning scan data - currentProgress: 2, totalScanned: 203, status: processing
7:21:03 PM [express] GET /api/scan/15 200 in 13ms :: {"scan":{"id":15,"userId":2,"totalScanned":203,…
📊 [API] Returning scan data - currentProgress: 2, totalScanned: 203, status: processing
7:21:04 PM [express] GET /api/scan/15 304 in 12ms :: {"scan":{"id":15,"userId":2,"totalScanned":203,…
🔄 [OpenRouter] Starting API call at 2025-08-01T19:21:06.265Z
📊 [API] Returning scan data - currentProgress: 2, totalScanned: 203, status: processing
7:21:06 PM [express] GET /api/scan/15 304 in 12ms :: {"scan":{"id":15,"userId":2,"totalScanned":203,…

Need better ways to work with logs? Try the
Render CLIor set up a log stream integration 